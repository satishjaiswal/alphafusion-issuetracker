{% extends "base.html" %}

{% block title %}Backlog Item: {{ backlog.title }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h1>{{ backlog.title }}</h1>
                <p class="text-muted mb-0">Backlog Item Details</p>
            </div>
            <a href="{{ url_for('backlog_list') }}" class="btn btn-secondary">Back to Backlog</a>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Description</h5>
            </div>
            <div class="card-body">
                <p class="mb-0">{{ backlog.description|nl2br }}</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Details</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Category:</strong><br>
                    <span class="badge badge-category-{{ backlog.category.value }}">
                        {{ backlog.category.value.replace('-', ' ').title() }}
                    </span>
                </div>
                
                <div class="mb-3">
                    <strong>Reporter:</strong><br>
                    {{ users.get(backlog.reporter_id, {}).display_name or backlog.reporter_id if users.get(backlog.reporter_id) else backlog.reporter_id }}
                </div>
                
                {% if backlog.assignee_id %}
                <div class="mb-3">
                    <strong>Assignee:</strong><br>
                    {{ users.get(backlog.assignee_id, {}).display_name or backlog.assignee_id if users.get(backlog.assignee_id) else backlog.assignee_id }}
                </div>
                {% endif %}
                
                <div class="mb-3">
                    <strong>Created:</strong><br>
                    {{ backlog.created_at.strftime('%Y-%m-%d %H:%M') if backlog.created_at else '-' }}
                </div>
                
                {% if backlog.updated_at %}
                <div class="mb-3">
                    <strong>Last Updated:</strong><br>
                    {{ backlog.updated_at.strftime('%Y-%m-%d %H:%M') }}
                </div>
                {% endif %}
                
                {% if backlog.tags %}
                <div class="mb-3">
                    <strong>Tags:</strong><br>
                    {% for tag in backlog.tags %}
                    <span class="badge bg-secondary me-1">{{ tag }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

